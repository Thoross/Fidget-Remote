<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Page</title>
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">
    <link href="http://bootswatch.com/slate/bootstrap.css" rel="stylesheet">
    <style type="text/css">
    .game-result
    {
        margin-bottom: 5px;
    }
    </style>
</head>
<body>
    <div class="container" style="padding-top:40px;">
        <div class="col-lg-12 col-sm-12">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search" id="searchTxt"/>
                <span class="input-group-btn">
                    <button class="btn btn-default" type="button" id="search"><span class="glyphicon glyphicon-search"></span> Search</button>
                </span>
            </div>
        </div>
        <br/>
        <br/>
        <div id="games" class="">
                
        </div>
    </div>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://192.168.2.18:9876/socket.io/socket.io.js"></script>
    <script>
        $(document).ready(function(){
            var socket = io.connect("http://192.168.2.18:9876");
            $('#search').click(function(){
                var searchQuery = 'https://api.twitch.tv/kraken/search/streams?limit=25&offset=0&q=';
                var searchText = $("#searchTxt").val();
                searchQuery = searchQuery + searchText;
                socket.emit('search',{query: searchQuery});
                console.log(searchQuery);
            });
            socket.on("search-result", function(data){
                $(".game-result").each(function(){
                    $(this).remove();
                });
                var streams = data.streams;
                for (streamIndex in streams){
                    var stream = streams[streamIndex];
                    console.log(stream);
                    var streamInfo = "<div class='col-lg-4 game-result'><a href='"+stream.channel.url+"' class='thumbnail'><img src='"+stream.preview.large+"'/></a><span class='glyphicon glyphicon-user'></span> "+stream.channel.display_name+"<span class='pull-right'>"+stream.viewers+" Viewers <span class='glyphicon glyphicon-eye-open'></span></span></div>";
                    $("#games").append(streamInfo);
                }
            });
        });
    </script>
</body>
</html>